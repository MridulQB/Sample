type UserProfile = 
 record {
   notificationsEnabled: bool;
   preferredCurrency: text;
   theme: text;
   username: text;
 };
type User = 
 record {
   joinedAt: Time;
   "principal": principal;
   role: Role;
   username: text;
 };
type UpdateTransactionResponse = 
 variant {
   categoryEmpty;
   invalidTxn;
   paymentMethodEmpty;
   success;
 };
type UpdateProfileResponse = 
 variant {
   invalidUser;
   success;
 };
type TransactionId = nat;
type Transaction = 
 record {
   amount: nat;
   category: Category;
   createdAt: Time;
   date: Time;
   id: TransactionId;
   notes: opt text;
   owner: principal;
   paymentMethod: PaymentMethod;
   updatedAt: Time;
 };
type Time = int;
type SetBudgetResponse = 
 variant {
   categoryEmpty;
   success;
 };
type Role = 
 variant {
   Admin;
   Editor;
 };
type RevokeAccessResponse = 
 variant {
   invalidUser;
   success;
   unauthorizedActivity;
 };
type PaymentMethodSummary = 
 record {
   count: nat;
   method: PaymentMethod;
   spent: int;
 };
type PaymentMethodResponse = 
 variant {
   invalidMethod;
   methodExists;
   success;
 };
type PaymentMethod = text;
type NotificationSettings = 
 record {
   browserNotifications: bool;
   budgetWarningThreshold: nat;
   emailNotifications: bool;
 };
type InviteToken = text;
type InvitationResponse = 
 variant {
   alreadyRegistered;
   alreadyUsedToken;
   expiredToken;
   invalidToken;
   shortUsername;
   success;
 };
type GenerateInviteLinkResponse = 
 variant {
   failed;
   success;
 };
type DeleteTransactionResponse = 
 variant {
   invalidTxn;
   success;
 };
type DeleteBudgetResponse = 
 variant {
   invalidCategory;
   success;
 };
type CategorySummary = 
 record {
   budget: opt nat;
   category: Category;
   percentage: float64;
   spent: int;
 };
type CategoryResponse = 
 variant {
   categoryExists;
   invalidCategory;
   success;
 };
type CategoryAction = 
 variant {
   add;
   delete;
 };
type Category = text;
type Budget = 
 record {
   amount: nat;
   category: Category;
   updatedAt: Time;
 };
type AddTransactionResponse = 
 variant {
   categoryEmpty;
   paymentMethodEmpty;
   success;
 };
service : {
  acceptInvite: (InviteToken, text) -> (InvitationResponse);
  addPaymentMethod: (PaymentMethod) -> (PaymentMethodResponse);
  addTransaction: (Time, nat, Category, PaymentMethod, opt text) ->
   (AddTransactionResponse);
  assertAdmin: () -> ();
  checkBudgetStatus: () -> (vec record {
                                  Category;
                                  nat;
                                  int;
                                  nat;
                                  bool;
                                });
  deleteBudget: (Category) -> (DeleteBudgetResponse);
  deletePaymentMethod: (PaymentMethod) -> (PaymentMethodResponse);
  deleteTransaction: (TransactionId) -> (DeleteTransactionResponse);
  generateInviteLink: () -> (GenerateInviteLinkResponse);
  getAllTransactions: () -> (vec record {
                                   TransactionId;
                                   Transaction;
                                 }) query;
  getBudgetAlerts: () -> (vec record {
                                Category;
                                int;
                                nat;
                                float64;
                              });
  getBudgetSummary: () -> (vec record {
                                 Category;
                                 nat;
                                 int;
                                 nat;
                               }) query;
  getBudgets: () -> (vec record {
                           Category;
                           Budget;
                         }) query;
  getCategories: () -> (vec Category) query;
  getCategorySummary: (opt Time, opt Time) -> (vec CategorySummary) query;
  getDashboardSummary: () ->
   (record {
      budgetStatus: vec record {
                          Category;
                          float64;
                        };
      categoriesCount: nat;
      totalExpenses: int;
      totalIncome: int;
      totalTransactions: nat;
    }) query;
  getFilteredTransactions: (opt Time, opt Time, opt int, opt int,
   opt Category, opt PaymentMethod) ->
   (vec record {
          TransactionId;
          Transaction;
        }) query;
  getNotificationSettings: () -> (opt NotificationSettings) query;
  getPaymentMethodSummary: (opt Time, opt Time) ->
   (vec PaymentMethodSummary) query;
  getPaymentMethods: () -> (vec PaymentMethod) query;
  getTransaction: (TransactionId) -> (opt Transaction) query;
  getUserProfile: () -> (opt UserProfile) query;
  getUsers: () -> (vec User) query;
  manageCategory: (Category, CategoryAction) -> (CategoryResponse);
  revokeAccess: (principal) -> (RevokeAccessResponse);
  setBudget: (Category, nat) -> (SetBudgetResponse);
  setNotificationSettings: (NotificationSettings) -> (UpdateProfileResponse);
  setUserProfile: (UserProfile) -> (UpdateProfileResponse);
  updateTransaction: (TransactionId, Time, nat, Category, PaymentMethod,
   opt text) -> (UpdateTransactionResponse);
}
